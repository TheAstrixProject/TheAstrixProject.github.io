// Generated by CoffeeScript 1.10.0
(function() {
  var Planet, clicksRaw, draw, fps, framerate, planetSz, planets, resize, sizeCanvas, tick;

  framerate = 60;

  planetSz = {
    X: 100,
    Y: 100
  };

  Planet = function(x, y) {
    this.X = x;
    return this.Y = y;
  };

  fps = function(d) {
    return 1000 / d;
  };

  sizeCanvas = function() {
    var canvas;
    canvas = document.getElementById('screen');
    canvas.style.width = '100%';
    canvas.style.height = '98%';
    canvas.width = canvas.offsetWidth;
    return canvas.height = canvas.offsetHeight;
  };

  draw = function(p) {
    var ctx;
    ctx = $('#screen')[0].getContext('2d');
    return ctx.drawImage($('#POL')[0], p.X - (planetSz.X / 2), p.Y - (planetSz.Y / 2), planetSz.X, planetSz.Y);
  };

  resize = $(window).asEventStream('resize');

  clicksRaw = $('#screen').asEventStream('click');

  tick = Bacon.interval(fps(framerate));

  resize.onValue(sizeCanvas);

  planets = clicksRaw.scan([], function(a, e) {
    a.push(new Planet(e.offsetX, e.offsetY));
    return a;
  });

  sizeCanvas();

  planets.sampledBy(tick).onValue(function(model) {
    var i, len, planet, results;
    results = [];
    for (i = 0, len = model.length; i < len; i++) {
      planet = model[i];
      results.push(draw(planet));
    }
    return results;
  });

}).call(this);
